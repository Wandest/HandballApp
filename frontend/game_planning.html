<div class="card-container">
    <div class="card">
      <div class="card-content">
        <h2>Spiel anlegen</h2>
        <div class="game-category-tabs">
            <button class="tab-button" id="tab-btn-saison" onclick="switchGameCategory('Saison')" disabled>Saison</button>
            <button class="tab-button active" id="tab-btn-testspiel" onclick="switchGameCategory('Testspiel')" disabled>Testspiel</button>
            <button class="tab-button" id="tab-btn-turnier" onclick="switchGameCategory('Turnier')" disabled>Turnier</button>
        </div>
        <form id="add-game-form">
            <input type="hidden" id="active-game-category" value="Testspiel">
            <div class="form-section active" id="common-game-fields">
                <label for="game-opponent">Gegner:</label>
                <input type="text" id="game-opponent" required>
                <label for="game-date">Datum:</label>
                <input type="date" id="game-date" required>
                
                <label for="game-video-url">Video URL (Optional):</label>
                <input type="text" id="game-video-url" placeholder="https://www.youtube.com/watch?v=...">
            </div>
            
            <div class="form-section" id="tournament-game-fields">
                 <label for="tournament-select">Turnier auswählen:</label>
                 <select id="tournament-select">
                     <option value="" disabled selected>Team wählen...</option>
                 </select>
                 <div id="new-tournament-group">
                     <label for="new-tournament-name">Neuer Turniername:</label>
                     <input type="text" id="new-tournament-name">
                 </div>
            </div>
            <button type="submit" class="btn btn-primary" id="add-game-button" disabled>Spiel erstellen</button>
        </form>
        <div id="game-message" class="message"></div>
      </div>
    </div>
    <div class="card">
      <div class="card-content">
        <h2>Spielplan</h2>
        <h3><span id="gameplan-team-name" style="color: #ffcc00;">(Team wählen)</span></h3>
        <div id="game-list-container" style="max-height: 400px; overflow-y: auto;">
            <p style="opacity: 0.6;">Wählen Sie eine Mannschaft aus.</p>
        </div>
      </div>
    </div>
</div>

<div id="video-url-modal" class="modal">
  <div class="modal-content card">
    <span class="close-btn" onclick="closeVideoModal()">&times;</span>
    <div class="card-content">
      <h3 id="video-modal-title">Video-URL bearbeiten</h3>
      <p style="opacity: 0.8; font-size: 0.9em;">
        Fügen Sie hier einen Link zu einer Video-Datei (MP4, M3U8) oder 
        einen YouTube-Link ein (z.B. https://www.youtube.com/watch?v=VIDEO_ID).
      </p>
      <div class="form-section active">
        <label for="video-url-input-modal">Video-URL:</label>
        <input type="text" id="video-url-input-modal" placeholder="https://...">
      </div>
      <input type="hidden" id="video-modal-game-id">
      <button id="save-video-url-btn" class="btn btn-primary btn-full-width" onclick="saveVideoUrl()">
        Speichern
      </button>
      <div id="video-modal-message" class="message"></div>
    </div>
  </div>
</div>
<script>
    // --- Modale Schließen Events (lokal beibehalten) ---
    const videoModal = document.getElementById('video-url-modal');
    
    // MUSS in game_planning.js definiert werden
    function closeVideoModal() { videoModal.style.display = 'none'; }
    
    videoModal.addEventListener('click', function(event) {
        if (event.target == videoModal) {
            closeVideoModal();
        }
    });
</script>
<script src="/static/game_planning.js"></script>