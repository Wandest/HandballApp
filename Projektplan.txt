Projektplan: Handball-Auswertungs-App (Pro-Level)

Ziel: Entwicklung einer "Non-Plus-Ultra" Handball-Analyse-App, die von der Kreisliga bis zur Bundesliga professionelle Ansprüche erfüllt.

Phase 1: Grundgerüst & MVP

Status: ✅ ABGESCHLOSSEN
[x] Technologie-Setup (FastAPI, SQLAlchemy, pywebview)
[x] Datenbank-Modelle (Trainer, Team, Spieler)
[x] Benutzerverwaltung & Verifizierung (auth.py)
[x] Dashboard-UI & Lade-Logik (dashboard.html, app_loader.html)

Phase 2: Kernfunktion: Team-Management

Status: ✅ ABGESCHLOSSEN
[x] Team-Management (Erstellen, Liga zuweisen, Auflisten)
[x] Spieler-Management (Erstellen, Löschen, Zuweisen)
[x] Kader-Ansicht im Dashboard
[x] "Eigene Aktionen" (Custom Actions) mit Team-Verknüpfung

Phase 3: Kernfunktion: Live-Spiel-Protokoll

Status: ✅ ABGESCHLOSSEN
[x] Protokoll-UI (protocol.html)
[x] Dynamisches Laden des Kaders (Roster)
[x] Protokollieren von festen Aktionen (Tor, Fehlwurf, 7m, Tech. Fehler, Parade)
[x] Protokollieren von "Eigenen Aktionen" (Custom Actions)
[x] Live-Statistik (Feldspieler, Torwart, Team)
[x] Live-Statistik (Quotenberechnung)

Phase 4: Spiel-Kategorisierung & Saison-Logik

Status: ✅ ABGESCHLOSSEN
[x] Datenbank-Erweiterung (game_category, tournament_name)
[x] UI-Neugestaltung "Spiel anlegen" (Tabs: Saison, Testspiel, Turnier)
[x] Turnier-Logik (Auswahl existierender oder Erstellung neuer Turniere)
[x] Spielplan-Ansicht mit Gruppierung nach Kategorie

Phase 5: Saison-Auswertung

Status: ✅ ABGESCHLOSSEN
[x] API für Saison-Statistik (GET /stats/season/{team_id})
[x] UI für Saison-Statistik im Dashboard
[x] Archiv-Logik ("Saison beenden" via POST /games/archive/season/{team_id})
[x] Pro-Feature: "Tore pro Spiel" korrekt berechnet (basierend auf game_participations_table / "Aktiver Kader")

Phase 6: Das "Liga"-Feature (Nächste Schritte)

Status: ⬜ ZU TUN
[ ] Backend: Öffentliche API-Endpunkte erstellen (z.B. GET /public/league/{league_name}/teams, GET /public/team/{team_id}/stats). Diese dürfen NUR Lesezugriff auf aggregierte Saison-Daten gewähren.
[ ] Backend: Eine Logik entwickeln, um Teams als "öffentlich sichtbar" zu markieren (Datenschutz).
[ ] UI "Liga-Scouting": Neuen Bereich im Dashboard schaffen.
[ ] UI: Trainer kann seine Liga auswählen und ein öffentliches Ranking (Tabelle, Wurfquoten etc.) aller "öffentlich sichtbaren" Teams dieser Liga sehen.

Phase 7: UI/UX Professionalisierung (Redesign)

Status: ⬜ ZU TUN
[ ] Navigation: Das "Alles-auf-einem-Fleck"-Dashboard durch eine saubere Navigationsstruktur ersetzen (z.B. eine feste Sidebar/Seitenleiste).
[ ] Seitenstruktur: App in dedizierte Seiten aufteilen:
[ ] Dashboard / Home (Übersicht, nächste Termine)
[ ] Team-Management (Auswahl, Spieler, Eigene Aktionen)
[ ] Saison & Statistik (Spielplan, Saison-Statistik, Archive)
[ ] Liga-Scouting (Phase 6)
[ ] Trainings-Planung (Phase 10)
[ ] Visuelles Design: Modernisierung mit Fokus auf schnelle, intuitive Bedienung auf Tablets (größere Klickflächen, klarere Kontraste, responsives Design).

Phase 8: Pro-Level: Video & Wurfbild-Analyse

Status: ⬜ ZU PLANEN
[ ] Datenbank: Action-Modell erweitern um x_coordinate und y_coordinate (für Wurfbild) und video_timestamp (für Video-Schnitt).
[ ] UI Protokoll (Wurfbild): Statt "Tor"-Button ein klickbares Handball-Tor (oben links, unten rechts etc.) implementieren, um die Wurfzone zu speichern.
[ ] UI Protokoll (Spielfeld): (Optional) Klickbares Spielfeld, um den Ort von Aktionen (Wurf, Fehlwurf, Tech. Fehler) zu speichern.
[ ] UI Protokoll (Video): Integration eines Video-Players. Beim Klick auf einen Action-Button wird der aktuelle Zeitstempel des Videos mitgespeichert.
[ ] Statistik-UI (Wurfbilder): Neue Ansicht "Shot Charts" erstellen, die Wurfzonen und Trefferquoten pro Spieler und Team visualisiert.
[ ] Statistik-UI (Video-Schnitt): DAS Pro-Feature. Trainer klickt auf "Alle Paraden von Spieler X" oder "Alle Tech. Fehler Team Y". Die App generiert eine Schnitt-Liste (Playlist), die nur diese Szenen (basierend auf den Timestamps) aus dem Video abspielt.

Phase 9: Pro-Level: Detailliertes Gegner-Scouting

Status: ⬜ ZU PLANEN
[ ] UI Protokoll: Das Protokoll-System "umkehren". Ermöglichen, dass ein Trainer ein volles Protokoll (inkl. Wurfbilder) für den Gegner führen kann (wichtig für die Spielvorbereitung).
[ ] UI Protokoll (Echtzeit): Ermöglichen, dass 2+ Geräte (Trainer, Co-Trainer) gleichzeitig am selben Spiel protokollieren (z.B. einer Team A, einer Team B). Benötigt WebSockets statt reinem HTTP.
[ ] Statistik-UI: Integration mit Phase 6 & 8. Die "öffentlichen" Liga-Daten nutzen, um Wurfbilder und Tendenzen von Gegnern zu analysieren.

Phase 10: Non-Plus-Ultra: Athletik & Belastungssteuerung

Status: ⬜ ZU PLANEN
[ ] Datenbank: Neue Modelle für Injury (Verletzung) und WellnessLog (Wellnes-Eintrag).
[ ] Feature (Spielzeit): Spielzeit pro Spieler automatisch aus den Protokolldaten berechnen (z.B. durch Ein-/Auswechslungs-Buttons im Protokoll).
[ ] Feature (Wellness-Tracking): Spieler erlauben (z.B. via einfacher Web-Ansicht), tägliches Feedback zu loggen:
[ ] Schlafqualität (1-5)
[ ] Muskelkater (1-5)
[ ] Stresslevel (1-5)
[ ] RPE (Rate of Perceived Exertion) nach Training/Spiel.
[ ] Feature (Medical): Trainer/Physio kann Verletzungen loggen (player_id, injury_type, expected_return_date, status [z.B. "Kein Kontakt", "Lauftraining", "Voll belastbar"]).
[ ] Dashboard-UI: Warnungen für den Trainer (z.B. "Spieler X hat 3x schlecht geschlafen", "Spieler Y ist überlastet").

Phase 11: Non-Plus-Ultra: Trainings-Management

Status: ⬜ ZU PLANEN
[ ] Datenbank: Neue Modelle für TrainingSession (Trainingseinheit) und Drill (Übung).
[ ] Feature (Planung): Kalender-Ansicht für den Trainer, um Trainingseinheiten zu planen (Datum, Fokus, Halle).
[ ] Feature (Übungs-DB): Eine Datenbank, in die Trainer eigene Übungen (mit Beschreibung, Skizze, Video-Link) eintragen können.
[ ] Feature (Anwesenheit): Anwesenheits-Tracking für Trainingseinheiten.
[ ] Analyse: Verbindung von Trainings-Inhalt zu Spiel-Leistung (z.B. "Fokus: Abwehr Kreis -> Tech. Fehler im Spiel reduziert?").

Phase 12: Non-Plus-Ultra: KI-Analyse & Konnektivität

Status: ⬜ ZU PLANEN
[ ] KI-Analyse (Sequenzen): Backend analysiert die Action-Logs (Zeitstempel), um erfolgreiche Aktionsketten zu erkennen (z.B. "Pass [RM] -> Pass [KL] -> 7m verursacht" vs. "Fehlwurf [RL]").
[ ] KI-Analyse (Prognose): Basierend auf Gegner-Wurfbildern (aus Phase 9) vorschlagen, welche Abwehr-Formationen oder Torwart-Positionierungen sinnvoll sind.
[ ] Konnektivität (API): Eine private, gesicherte API für Trainer bereitstellen, um Rohdaten (z.B. als CSV) zu exportieren/importieren.
[ ] Konnektivität (Kalender): Export von Spiel- und Trainingsplänen via .ics (iCal-Format) für Google Calendar, Outlook etc.
[ ] Kommunikation: Internes, einfaches Messaging-System (Trainer an Team, Trainer an Spieler).